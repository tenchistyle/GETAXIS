<!DOCTYPE html> 
<html>
<head>
<meta charset="utf-8">
<title>Ingreso Getaxis</title>
<link href="jquery-mobile/jquery.mobile-1.0a3.min.css" rel="stylesheet" type="text/css"/>
<script src="jquery-mobile/jquery-1.5.min.js" type="text/javascript"></script>
<script src="jquery-mobile/jquery.mobile-1.0a3.min.js" type="text/javascript"></script>
<script src="/phonegap.js" type="text/javascript"></script>

<script type="text/javascript">
function leerGET(){ 
  var cadGET = location.search.substr(1,location.search.length); 
  var arrGET = cadGET.split("&"); 
  var asocGET = new Array(); 
  var variable = ""; 
  var valor = ""; 
  for(i=0;i<arrGET.length;i++){ 
    var aux = arrGET[i].split("="); 
    variable = aux[0]; 
    valor = aux[1]; 
    asocGET[variable] = valor; 
  } 
  return asocGET; 
} 
var paresVarValor = leerGET();
var taxista= paresVarValor["taxista"];
</script>

<script type="text/javascript">

//se crea una respuesta ajax 
function creaRequest()
{	
if (window.XMLHttpRequest) {
        return new window.XMLHttpRequest;
    }
    else {
        try {
            return new ActiveXObject("MSXML2.XMLHTTP.3.0");
        }
        catch(ex) {
			alert(ex);
            return null;
        }
    }
}
//apenas inicia la pagina se ejecuta la funcion creaRequest();
var http = creaRequest();
var perfil = "";

function handler()
{
	//pregunta si ajax esta listo y cargo la pagina correctamente
    if (http.readyState == 4 /* complete */) {
		//estatus en 200 se lee lo que esta en la pagina
       if (http.status == 200)
		 {
			perfil = http.responseText;
			llamaPerfil();
	  
        }
    }
}


//se inicia la funcion ajax
function Inicia(){
	//se envian los datos html a una pagina php y se ejecuta
	var url = "http://201.239.165.140/Getaxis/Taxista/Perfil.php?taxista="+taxista;
	
if (http != null) {
    http.open("GET", url, true);
	//handler es una funciona y se ejecuta en la siguiente linea
    http.onreadystatechange = handler;
    http.send();
}
else {
    alert("AJAX (XMLHTTP) not supported.");
}

}

</script>

</head> 
<body onLoad="Inicia()"> 

<div data-role="page" id="page">
	<div data-role="header">
		<h1>Mi Perfil</h1>
	</div>
	<div data-role="content" id="perfil">
		<script type="text/javascript">
		function llamaPerfil()
		{
			document.getElementById("perfil").innerHTML = perfil;
		}
  
</script>
    </div>
	<div data-role="footer">
		<h4>XtreamSoft @ [Taxista V.1.0]</h4>
	</div>
</div>
</body>
</html>
